{
	"$schema": "http://json-schema.org/draft-04/schema#",
	"title": "Global Schema",
	"definitions": {
		"boolean": {
			"type": "string",
			"enum": [
				"true",
				"false"
			]
		},
		"hwaddr": {
			"type": "string",
			"pattern": "^([0-9a-f]{2}:){5}[0-9a-f]{2}$"
		},
		"ipv4": {
			"type": "string",
			"pattern": "^([0-9]{1,3}\\.){3}[0-9]{1,3}$"
		},
		"image_version": {
			"type": "object",
			"required": [ "main_script", "timestamp" ],
			"additionalProperties": false,
			"properties": {
				"main_script": {
					"type": "string"
				},
				"timestamp": {
					"type": "string"
				}
			}
		}
	},
    "type": "object",
    "required": [ "bootstrap_image", "debug", "docker_registry", "file_registry", "gpt", "kexec", "kopts", "main_script", "naming_scheme", "type", "version", "versions" ],
    "additionalProperties": false,
	"properties": {
		"bootstrap_image": {
			"type": "string"
		},
		"debug": {
            "$ref": "#/definitions/boolean"
		},
        "docker_registry": {
            "type": "string"
        },
        "file_registry": {
            "type": "string"
        },
		"gpt": {
            "$ref": "#/definitions/boolean"
		},
        "kexec": {
            "$ref": "#/definitions/boolean"
        },
        "kopts": {
            "type": "string"
        },
        "main_script": {
            "type": "string"
        },
        "post_script": {
            "type": "string"
        },
        "naming_scheme": {
            "type": "string"
        },
        "type": {
            "type": "string"
        },
		"version": {
			"type": "string",
			"pattern": "^([a-z0-9]{7}|latest)$"
		},
		"versions": {
			"type": "object",
			"additionalProperties": false,
			"patternProperties": {
				"^([a-f0-9]{7}|latest)$": {
            		"$ref": "#/definitions/image_version"
				}
			}
        }
	}
}
