install
url --url http://mirror.1000mbps.com/centos/7/os/x86_64/

lang en_US.UTF-8
keyboard us
timezone --utc --nontp Etc/UTC

network --device=em0 --bootproto=dhcp --ipv6=auto
firewall --disable

services --enabled=network,sshd

authconfig --enableshadow --passalgo=sha512
selinux --disabled
rootpw D0ck2B0x

text
skipx

repo --name=centos --baseurl=http://mirror.1000mbps.com/centos/7/os/x86_64/
repo --name=centos-updates --baseurl=http://mirror.1000mbps.com/centos/7/updates/x86_64/
repo --name=centos-extras --baseurl=http://mirror.1000mbps.com/centos/7/extras/x86_64/
repo --name=epel --baseurl=http://mirror.nl.leaseweb.net/epel/7/x86_64/

zerombr
clearpart --all
bootloader --location=mbr
part / --size 6000 --fstype ext4

firstboot --disabled
reboot

%packages
@core
chrony
dracut-config-generic
dracut-norescue
firewalld
grub2
kernel
nfs-utils
rsync
tar
yum-utils
-NetworkManager
-aic94xx-firmware
-alsa-firmware
-alsa-lib
-alsa-tools-firmware
-biosdevname
-iprutils
-ivtv-firmware
-iwl100-firmware
-iwl1000-firmware
-iwl105-firmware
-iwl135-firmware
-iwl2000-firmware
-iwl2030-firmware
-iwl3160-firmware
-iwl3945-firmware
-iwl4965-firmware
-iwl5000-firmware
-iwl5150-firmware
-iwl6000-firmware
-iwl6000g2a-firmware
-iwl6000g2b-firmware
-iwl6050-firmware
-iwl7260-firmware
-libertas-sd8686-firmware
-libertas-sd8787-firmware
-libertas-usb8388-firmware
-plymouth

# Needed for Dock2Box
mdadm
lvm2
%end

%post

# Add user
groupadd dock2box -g 1001
useradd dock2box -g dock2box -u 1001
echo D0ck2B0x | passwd --stdin dock2box

echo "dock2box        ALL=(ALL)       NOPASSWD: ALL" >> /etc/sudoers.d/dock2box
sed -i "s/^.*requiretty/#Defaults requiretty/" /etc/sudoers
%end
