{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Host Schema",
  "oneOf": [
    {
      "$ref": "#/definitions/host"
    },
    {
      "$ref": "#/definitions/onlyBuild"
    }
  ],
  "definitions": {
    "host": {
      "type": "object",
      "required": [
        "debug",
        "gpt",
        "image",
        "kexec",
        "kopts",
        "site",
        "version",
        "interface"
      ],
      "additionalProperties": false,
      "properties": {
        "build": {
          "$ref": "types.json#/definitions/boolean"
        },
        "dhcp": {
          "$ref": "#/definitions/dhcp"
        },
        "legacynet": {
          "$ref": "types.json#/definitions/boolean"
        },
        "debug": {
          "$ref": "types.json#/definitions/boolean"
        },
        "gpt": {
          "$ref": "types.json#/definitions/boolean"
        },
        "volmgt": {
          "type": "string",
          "enum": [
            "btrfs",
            "lvm"
          ]
        },
        "image": {
          "pattern": "^.+$",
          "type": "string"
        },
        "interface": {
          "type": "object",
          "additionalProperties": false,
          "patternProperties": {
            "^[a-z][a-z0-9]+$": {
              "$ref": "interface.json#"
            }
          }
        },
        "kexec": {
          "$ref": "types.json#/definitions/boolean"
        },
        "kopts": {
          "type": "string"
        },
        "site": {
          "$ref": "types.json#/definitions/site"
        },
        "version": {
          "$ref": "types.json#/definitions/version"
        }
      }
    },
    "onlyBuild": {
      "required": [
        "build"
      ],
      "additionalProperties": false,
      "properties": {
        "build": {
          "$ref": "types.json#/definitions/boolean"
        },
        "dhcp": {
          "$ref": "#/definitions/dhcp"
        }
      }
    },
    "dhcp": {
      "required": [
        "hwaddr",
        "ipv4"
      ],
      "additionalProperties": false,
      "properties": {
        "hwaddr": {
          "$ref": "types.json#/definitions/hwaddr"
        },
        "ipv4": {
          "type": "string",
          "format": "ipv4"
        }
      }
    }
  }
}
